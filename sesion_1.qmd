---
title: "Introducci√≥n a R y Quarto"
author: "Catalina Ca√±izares, Ph.D. and Francisco Cardozo Ph.D."
date: today
format: 
  revealjs:
    scrollable: true
    incremental: true
    slide-number: true
    width: 1600
    height: 900
    theme: "simple"
    echo: true
    chalkboard: true
    highlight-style: github
    code-tools: true
    css: style-copy.css
editor_options: 
  chunk_output_type: console
bibliography: ref.bib
---

> Del an√°lisis al Reporte: Ciencia de Datos con R y Quarto¬© 2025 por Catalina Canizares y Francisco Cardozo est√° licenciado bajo Creative Commons Atribuci√≥n‚ÄìNoComercial‚ÄìSinDerivadas 4.0 Internacional

Este material est√° disponible gratuitamente bajo la licencia Creative Commons Atribuci√≥n‚ÄìNoComercial‚ÄìSinDerivadas 4.0 Internacional.

Para m√°s informaci√≥n sobre esta licencia, visita: [Licencia Creative Commons](https://creativecommons.org/licenses/by-nc-nd/4.0/)



# ¬°Bienvenidos! üëã

# Nosotros somos...

::::{.columns}
:::: {.column width="50%"}

```{=html}
<iframe width="1000" height="700" src="https://focardozom.github.io/" title="Webpage example"></iframe>
```



::::
:::: {.column width="50%"}
```{=html}
<iframe width="1000" height="700" src="https://ccani007.github.io/ccani_website/" title="Webpage example"></iframe>
```

::::
::::



# Agenda de hoy üìã

::::{.incremental}
- Qu√© es un modelo predictivo? 
- Repaso de c√≥mo usar R y RStudio
- Creaci√≥n de nuestro primer documento en Quarto
- Trabajo con datos en R
- Introducci√≥n del paquete `tidyverse` y `tidymodels`
::::

## Durante los pr√≥ximos 4 d√≠as vamos a: üöÄ

- üìä Repasar c√≥mo usar R y RStudio
- üìù Aprender a usar Quarto
- üîß Aprender a usar `tidyverse` para manipulaci√≥n de datos
- ü§ñ Aprender a usar `tidymodels` para machine learning
    - Aprenderemos los siguientes modelos de Machine Learning SUPERVISADO:
        - Regresi√≥n log√≠stica
        - Regresi√≥n LASSO
        - Modelos basados en √°rboles
          - Random Forest
          - XGBoost

## ¬øC√≥mo? üí°

:::: {.fragment}
::::{.incremental}
- Este taller ser√° principalmente pr√°ctico: ustedes seguir√°n mis presentaciones y programar√°n conmigo.

- ¬°Vamos a usar datos de la vida real! üìà


::::
::::

:::: {.fragment}
**Encuesta r√°pida:** ¬øQu√© tan familiarizado(a) est√°s con R?

- Principiante absoluto

- Algo de experiencia

- Intermedio

- Avanzado
::::

## Antes de empezar... ‚ö°

Algunas aclaraciones sobre el c√≥digo de conducta:
**¬°Iremos tan r√°pido como la persona m√°s lenta en la sala!** üê¢

- Esto significa: si no est√°s siguiendo, ¬°por favor pregunta! üôã‚Äç‚ôÄÔ∏è

- Voy a interrumpir la clase para ayudarles a solucionar problemas en sus computadores; lo haremos hablando los pasos, as√≠ si alguien est√° en la misma situaci√≥n podr√° aprender a solucionarlo.

- Si sabes c√≥mo ayudar a tu vecino(a), ¬°hazlo! ü§ù

- Todas las preguntas son bienvenidas, v√°lidas, y TODAS las personas respetar√°n tu voz. üí´

- No se permitir√° ni tolerar√° troleo, bullying, ni ning√∫n comportamiento irrespetuoso. ‚ùå


## Proyecto del m√≥dulo
:::: {.fragment}
::::{.incremental}
Crear un documento html usando Quarto para analizar los datos de la Youth Risk Behavior Survey (YRBS) 2023 que incluya:

1. Una breve introducci√≥n al proyecto.
2. Una secci√≥n de resultados que muestre el desempe√±o del modelo y una visualizaci√≥n de las predicciones del modelo.


::::
::::


## Objetivos de hoy
::::{.incremental}
- Modelos predictivos vs. descriptivos vs. diferenciales vs. inferenciales
- Reconocer la importancia de trabajar dentro de proyectos e iniciar un nuevo proyecto en RStudio (localmente).
- Crear el primer documento en Quarto y entender sus componentes.
- Aprender a importar datos desde distintas fuentes al archivo Quarto.
- Explorar un conjunto de datos e identificar diferentes tipos de variables.
- Aprender a usar `tidyverse` para manipulaci√≥n de datos
- Intoducir `tidymodels` para machine learning
::::


# Tipos de modelos
::: panel-tabset

### Descriptivo

- Describe o ilustra caracter√≠sticas de algunos datos.
- Sin otro prop√≥sito que enfatizar visualmente alguna tendencia o patr√≥n en los datos.

:::footer
[Tidy Modeling With R](https://www.tmwr.org/software-modeling.html)
:::
### Inferencial

- Explora una hip√≥tesis espec√≠fica: se utilizan pruebas estad√≠sticas.

Un modelo inferencial parte de una conjetura o idea predefinida sobre una poblaci√≥n y produce una conclusi√≥n estad√≠stica, como un intervalo de estimaci√≥n o el rechazo de una hip√≥tesis.

- Por ejemplo, el objetivo de un ensayo cl√≠nico podr√≠a ser confirmar que una nueva terapia hace un mejor trabajo prolongando la vida.

:::footer
[Tidy Modeling With R](https://www.tmwr.org/software-modeling.html)
:::
### Predictivo

- Produce la predicci√≥n m√°s precisa posible.
- Los valores predichos buscan la mayor fidelidad posible al valor real en los datos nuevos.

:::footer
[Tidy Modeling With R](https://www.tmwr.org/software-modeling.html)
:::
:::


## ¬øInteligencia artificial? ¬øMachine Learning? ¬øQu√©?
::: {.incremental}
:::: {.columns}
::: {.column width="50%"}
![](img/Aintelligence.png)
:::


::: {.column width="50%"}
- **Inteligencia artificial** es el nombre de todo un campo de conocimiento.  

- **Machine Learning** es una parte de la inteligencia artificial.  

- **Redes neuronales** son uno de los tipos de machine learning.

:::footer
[Machine Learning for Everyone](https://vas3k.com/blog/machine_learning/)
:::
:::
:::
:::: 


# Introducci√≥n a R y RStudio

## C√≥mo se siente aprender R

![](img/learning_r.png)


## El mejor consejo...
::::{.incremental}
- El mejor consejo para trabajar en R es organizar tu trabajo dentro de proyectos.

- **¬øPor qu√©?**
- Reproducibilidad
- Organizaci√≥n
- M√°s razones [aqu√≠](https://www.tidyverse.org/blog/2017/12/workflow-vs-script/)
::::

## Pasos para crear el proyecto

:::: {.fragment}
:::: {.r-stack}

![](img/1.png){.fragment fig-align="center"}

![](img/2.png){.fragment fig-align="center"}
::::
::::

## Pasos para crear el proyecto
![](img/3.png)


## Pasos para crear el proyecto

:::: {.r-stack}
![](img/4.png){.fragment}

![](img/5.png){.fragment}

::::

## Pasos para crear el proyecto

![](img/6.png)


## Ahora que tenemos un proyecto

- Vamos a crear un script y explorar el IDE

> (Entorno de Desarrollo Integrado)

:::: {.fragment}
![](https://media.giphy.com/media/lYjA4tfvCc8UAju1Op/giphy.gif?cid=790b76114ceilsw854km4k6b0tkgvdqv0xy5sb6e5n7rratd&ep=v1_gifs_search&rid=giphy.gif&ct=g){fig-align="center"}
::::

## Creando el script

:::: {.fragment}
:::: {.r-stack}
![](img/8.png){.fragment fig-align="center" width="60%"}

![](img/9.png){.fragment fig-align="center" width="40%"}


![](img/10.png){.fragment fig-align="center" width="70%"}

::::
::::

## El IDE de RStudio

![](img/11.png)

## Tomemos un descanso

![](https://media.giphy.com/media/jWcZAS6PyQyRJn634G/giphy.gif?cid=790b76113eswejr4wbrnqrxna9owuqa5ddd949pl2k0a79gu&ep=v1_gifs_search&rid=giphy.gif&ct=g){fig-align="center"}

```{r}
#| echo: false
library(countdown)


countdown(minutes = 5)
```




# Archivos Quarto

## Inspeccionando el archivo

![](img/Rmd_disect.png)



# YAML{background-color="black"}

# El encabezado de metadatos: <mark>YAML</mark>

+ Las primeras l√≠neas del documento son el encabezado del documento.  
+ Estas l√≠neas le dicen a R informaci√≥n crucial sobre c√≥mo construir tu reporte.   
+ Todo el encabezado y todas las opciones del documento dentro de √©l est√°n delimitados por las tres l√≠neas horizontales <mark> - - - </mark> arriba y abajo.  

# El encabezado de metadatos: <mark>YAML</mark>

:::: columns
:::: {.column width="50%"}

![](img/YAML.png)
::::
:::: {.column width="50%"}
**Actualmente nuestro encabezado es bastante b√°sico. Incluye:**

  + El t√≠tulo del documento; title: "Hello Quarto"
  + Qui√©n lo escribi√≥: author: "Catalina Canizares"
  + La fecha de hoy: "2024-05-30"
  + El tipo de salida: format --> html
  + Bibliograf√≠a
  + Tipo y formato de citaci√≥n
::::
::::

## Diferentes ejemplos de YAML{.scrollable}

:::: {.absolute}
![](img/word.png){.fragment}

![](img/ppt.png){.fragment}

![](img/simple_html.png){.fragment}
![](img/vitae.png){.fragment}
::::

# Bloques de c√≥digo{background-color="black"}

## Anatom√≠a de un chunk

![](img/chunk.png)
 
## Opciones de chunk
![](img/chunk_options.png){fig-align="center"}
 
 *Fuente:* [Code Chunks](https://quarto.org/docs/computations/execution-options.html)

## M√°s sobre chunks

**Crea chunks como un(a) `pro`**  
![](img/key_board.png){.fragment}

## M√°s sobre chunks

**Nombra tus chunks como un(a) `pro` usando <mark>kebab-case</mark>**

![](img/coding_cases.png){width="50%"}

## Ejemplo de chunk de c√≥digo

![](img/chunk_penguin.png)


# Texto en Markdown{background-color="black"}

## Texto en Markdown


Ahora que tenemos un reporte con un encabezado y algo de c√≥digo, necesitamos explicar qu√© est√° haciendo el c√≥digo y por qu√©.  

+ Aqu√≠ entra el texto plano.

+ Fuera de un bloque de c√≥digo, escribe lo que quieras. Incluso puedes incluir im√°genes y tablas.

![](img/text_penguin.png)

## Texto en Markdown
:::: columns
:::: {.column width="50%"}

![](img/text_penguin.png)
::::

:::: {.column width="50%"}
![](img/result_text_penguin.png)
::::
::::

## Referencias cruzadas
:::: columns
:::: {.column width="50%"}
### Tablas

- Siempre empiezan con <mark>`tbl-`<mark/>

![](img/tbl.png){.fragment}

::::
:::: {.column width="50%"}
### Figuras

- Siempre empiezan con <mark>`fig-`<mark/>

![](img/fig.png){.fragment}
::::
::::

## Formato de texto

![](img/text.png)

*Fuente* [Get Started with Quarto](https://rstudio-conf-2022.github.io/get-started-quarto/materials/01-intro-quarto.html#/quarto-more-internals)

## Encabezados de texto
![](img/headings.png)
*Fuente* [Get Started with Quarto](https://rstudio-conf-2022.github.io/get-started-quarto/materials/01-intro-quarto.html#/quarto-more-internals)


## Pausa corta

![](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExNWplbW5tcnF0dTVzbTc5NnMyMW9qZG1mOTExYjIzMTJ2ZW45aGJzbyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/k74OUg6bPJKy2JmyoS/giphy.gif){fig-align="center"}

```{r}
#| echo: false
library(countdown)


countdown(minutes = 5)
```




## Ejercicio

![](img/palmer.png)

## Ejercicio
:::: incremental
+ Vamos al proyecto que creamos

+ Modifica el YAML con tu informaci√≥n y nombra tu archivo

+ Revisa el YAML para que podamos ver el c√≥digo y los resultados.
::::

## Ejercicio
+ Crea un chunk y escribe:

```{r}
#| eval: false
#| code-copy: true

install.packages("palmerpenguins")
install.packages("table1")

library(palmerpenguins)
library(table1)


```


## Ejercicio

**¬øHay diferencias entre las especies de ping√ºinos con respecto a la longitud de sus aletas?**


+ Crea un chunk y carga los datos de palmerpenguins
```{r}
#| code-copy: true
data("penguins")
```

+ Crea otro chunk, ponle nombre, y explora los datos de la longitud de aleta
para los diferentes tipos de ping√ºinos con este c√≥digo:

```{r}
#| eval: false
#| code-copy: true
table1(~ flipper_length_mm | species, data = penguins)
```

+ Describe lo que ves en la tabla.

## Visualicemos nuestros hallazgos

+ Crea otro chunk, y revisemos:

```{r}
#| eval: false
#| code-copy: true

 ggplot(
  data = penguins,
  aes(x = species, y = flipper_length_mm)) +
  geom_boxplot(aes(color = species), 
               width = 0.3,
               show.legend = FALSE) +
  geom_jitter(aes(color = species),
              alpha = 0.5, 
              show.legend = FALSE, 
              position = position_jitter(
                width = 0.2, seed = 0)) +
  scale_color_manual(values = c("darkorange", "purple", "cyan4")) +
  labs(
    x = "Species",
    y = "Flipper length (mm)"
  )
```

## Estamos listos para renderizar nuestro reporte

Guarda tu reporte y...

![](img/knit.png)


# Mira tu consola mientras se renderiza

![](img/console.png)

![](img/report.png)


## Un poco m√°s de esa magia reproducible

```{r}
#| echo: false
library(palmerpenguins)
data("penguins")
```

Dentro del texto puedes incluir c√≥digo ejecutable con la sintaxis:

![](img/inline.png)

Por ejemplo:

Hay `r nrow(penguins)` filas en el conjunto de datos `penguins`.

**La verdad:**  
![](img/inlinepenguins.png)


## M√°s recursos

[Sitio web de Quarto](https://quarto.org/)

[R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)

![](img/logo_quarto.jpeg)


## Tomemos otro descanso

![](https://media.giphy.com/media/RiWZUGcZPEKdQgrQ96/giphy.gif?cid=790b76113eswejr4wbrnqrxna9owuqa5ddd949pl2k0a79gu&ep=v1_gifs_search&rid=giphy.gif&ct=g)



## Resumen

- Exploramos los conceptos fundamentales de la ciencia de datos.
- Profundizamos en la historia y evoluci√≥n de R.
- Aprendimos a crear y gestionar proyectos en RStudio.
- Ganamos pr√°ctica trabajando con archivos Quarto.


## Leyendo datos en nuestros archivos Quarto

::::{.incremental}

- R puede leer datos desde una variedad de formatos, incluyendo:
  - Excel (por ejemplo, CSV, XLSX, TXT)
  - SAS
  - Stata
  - SPSS
  - Otros paquetes estad√≠sticos

::::

## Consigamos los datos

1. Desde [Excel](https://github.com/ccani007/fau_module/blob/main/data/yrbs_2021.xlsx)
2. Desde [.csv](https://github.com/ccani007/fau_module/blob/main/data/yrbs_2021.csv)
3. Desde [.sav](https://github.com/ccani007/fau_module/blob/main/data/yrbs_2021.sav)
3. Desde R

## Paquete `rio`: una navaja suiza para datos
<br/>

:::: {.columns}
:::: {.column width="50%"}
:::: {.fragment}

```{r}
#| eval: false
#| code-copy: true
install.packages("rio")
```

```{r}
#| code-copy: true
library(rio)
```

::::
::::



:::: {.column width="50%"}
:::: {.fragment}

```{r}
#| code-copy: true
#| eval: false
yrbs_2021_df <- import("data/yrbs_2021.csv")
```


![](img/enviorment.png)
::::
::::
::::


## Paquete `rio`: una navaja suiza para datos

<br/>

:::: {.columns}
:::: {.column width="50%"}
:::: {.fragment}

```{r}
#| code-copy: true
#| eval: false
yrbs_2021_xlsx <- import("data/yrbs_2021.xlsx")
```

::::
::::

:::: {.column width="50%"}
:::: {.fragment}

![](img/enviorment_2.png)

::::
::::
::::


## Paquete `rio`: una navaja suiza para datos

<br/>

:::: {.columns}
:::: {.column width="50%"}
:::: {.fragment}

```{r}
#| code-copy: true
#| eval: false
yrbs_2021_sav <- import("data/yrbs_2021.sav")
```

::::
::::

:::: {.column width="50%"}
:::: {.fragment}

![](img/enviorment_3.png)

::::
::::
::::

## Exportar datos desde un paquete{.scrollable}

1.
```{r}
#| code-copy: true
#| eval: false

install.packages("devtools")

```

2.
```{r}
#| code-copy: true
#| eval: false
library(devtools)

install_github("ccani007/dissertationData")

```

3.
```{r}
#| code-copy: true

library(dissertationData)

data("clean_yrbs_2023")

```

:::: {.fragment}
![](img/enviorment_4.png){fig-align="center"}
::::

## Explora el conjunto de datos

- Veamos <mark>dos</mark> formas de explorar conjuntos de datos en R:

:::: {.fragment}
1. La forma m√°s simple y tradicional:


```{r}
glimpse(clean_yrbs_2023)
```

::::

## Explora el conjunto de datos {.scrollable}

2. La forma m√°s detallada (*en mi opini√≥n personal*):

```{r}
# install.packages("skimr")
library(skimr)
skim(clean_yrbs_2023)
```


## Tipos de variables

![](img/types_of_variables.drawio.svg)




## ¬øC√≥mo verlo en los datos?

![](img/glimpse_types.png)

## ¬°Ahora te toca a ti!
:::: {.columns}
:::: {.column width="50%"}
:::: {.fragment}
En tus proyectos:

1. ¬°Abramos Posit Cloud y creemos nuestros proyectos!
::::
::::

:::: {.column width="50%"}
:::: {.fragment}
![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnppYXN1M3VwZGR2dWwwaWVwN2l0b3VueWdrNDFoY2h2MDhtMjk2ciZlcD12MV9naWZzX3NlYXJjaCZjdD1n/XIqCQx02E1U9W/giphy.gif)
::::
::::
::::

# Introducci√≥n a `tidyverse`

## ![](img/tidyverse.png){width="5%" fig-align="center"} Tidyverse 


- Una colecci√≥n de paquetes de R üì¶s desarrollados por H. Wickham y colaboradores en Posit.

![](img/wickham.png){fig-align="center"}


# **Tidyverse** es una colecci√≥n de paquetes de R üì¶

* [`ggplot2` - visualizaci√≥n](https://ggplot2.tidyverse.org/)

* [`dplyr`, `tidyr` - manipulaci√≥n de datos](https://dplyr.tidyverse.org/)

* `purrr` - programaci√≥n avanzada (funciones y "loops")

* [`readr` - importar datos](https://readr.tidyverse.org/)

* [`tibble` - formato mejorado de `data.frame`](https://tibble.tidyverse.org/)

* [`forcats` - trabajar con factores](https://forcats.tidyverse.org/)

* [`stringr` - trabajar con cadenas de caracteres](https://stringr.tidyverse.org/)

## **Tidyverse**

:::{.incremental}

* Un marco para gestionar datos que busca hacer mucho m√°s f√°ciles los pasos de limpieza y preparaci√≥n

* Caracter√≠sticas principales de un conjunto de datos ‚Äútidy‚Äù:
    - Cada variable es una columna
    - Cada observaci√≥n es una fila
    - Cada valor est√° en una celda distinta
    
:::

## Tidy Data

![](img/tidydata.png){fig-align="center"}



## ¬øCu√°ndo limpiamos los datos?

![](img/data-science-workflow.png){fig-align="center"}

## Flujo de trabajo en ciencia de datos con **Tidyverse**

![](img/data-sciencie-workflow-packages.png){fig-align="center"}


## El operador pipe %>% *(y luego)*

![](img/pipe_1.png)

## El operador pipe %>% *(y luego)*

![](img/pipe_2.png)

## El operador pipe %>% *(y luego)*

![](img/pipe_3.png)

## El operador pipe %>% *(y luego)*

![](img/pipe_4.png)

## El operador pipe %>% *(y luego)*

::: columns
::: {.column width="60%"}
- Este `|>` tambi√©n es un pipe

-Atajo de teclado:

- En Mac: command + shift + m
- En Windows: ctrl + shift + m

:::
::: {.column width="40%"}
![](img/pipe.png)

:::
:::

## Dato curioso
:::{.incremental}


- El `%>%` viene de un paquete llamado `magrittr`
- Una referencia clara al famoso cuadro ‚ÄúThe Treachery of Images‚Äù del pintor belga Ren√© Magritte.


::: {.r-stack}
![](img/the-pipe.png){.fragment width="50%" fig-align="center" }

:::
:::

## Diferencia entre R base y `tidyverse`

- Datos de Star Wars del paquete `dplyr`

::: {.fragment}
![](https://media.giphy.com/media/dzWhPd9Zfry79cwBhn/giphy.gif?cid=ecf05e474nhidaye4mx2l8spp8ufuuwbpcy8anedf33yz50d&ep=v1_gifs_related&rid=giphy.gif&ct=g){fig-align="center" width=80%}

:::

## Explorando el conjunto de datos de Star Wars{.scrollable}

```{r}
#| echo: true
#| code-line-numbers: "1"
#| output-location: fragment

starwars

```


::: {.fragment}
```{r}
#| echo: true
#| code-line-numbers: "1"
#| output-location: fragment
skim(starwars)
```

:::

## Diferencia entre R base y `tidyverse`

Calculemos el IMC (√≠ndice de masa corporal) para cada personaje del conjunto de datos

::: columns
::: {.column width="50%"}

### R base ü§¢

```{r}
#| echo: true
#| code-line-numbers: "1"
#| output-location: fragment
starwars$bmi <- starwars$mass/(starwars$height/100)^2
```


:::

::: {.column width="50%"}

### tidyverse üòé

```{r}
#| echo: true
#| code-line-numbers: "1|2|3|4"
starwars_bmi <- 
  starwars %>% 
  mutate(bmi = mass/((height/100)^2)) %>% 
  select(bmi, everything()) # To see the created variable first
```

:::
:::
::: {.fragment}

```{r}
starwars_bmi
```

:::

## ¬°Nos vemos la pr√≥xima!

![](https://media.giphy.com/media/jUr8EBC1eLq1oFbcBF/giphy.gif?cid=ecf05e47sepiwsspevvk5rf5cdz1wa7imclkeexbjghm0wdc&ep=v1_gifs_search&rid=giphy.gif&ct=g)


## Referencias


